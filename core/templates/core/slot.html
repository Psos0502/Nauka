{% load static %}
<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Jednorƒôki Bandyta</title>

<style>
body {
    margin: 0;
    min-height: 100vh;
    background: #165f3a;
    font-family: Arial, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
}

/* ===== RAMKA ===== */
.frame-wrapper {
    position: relative;
    width: 550px;
    height: 760px;
    z-index: 5;
}

.frame-wrapper img {
    width: 100%;
    height: 100%;
    display: block;
}

/* ===== SLOTY W ≈öRODKU RAMKI ===== */
.slot-cabinet {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    
    width: 300px;
   
    padding: 20px;
    text-align: center;
    color: white;

   
}

/* ===== SLOT MACHINE ===== */
.slot-machine {
    display: flex;
    justify-content: center;
    gap: 12px;
    padding: 15px;
    margin: 15px 0;
    background: #000;
    border: 3px solid gold;
    border-radius: 12px;
    box-shadow: inset 0 0 15px #fff, 0 0 20px gold;
}

.reel {
    width: 65px;
    height: 65px;
    background: #000;
    border-radius: 10px;
    font-size: 2.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: inset 0 0 10px #fff, 0 0 10px gold;
    transition: transform 0.2s;
}

.reel.spinning {
    transform: scale(1.1);
    opacity: 0.7;
}

/* ===== LED ===== */
.led {
    width: 8px;
    height: 8px;
    background: red;
    border-radius: 50%;
    display: inline-block;
    margin: 2px;
    animation: blink 1s infinite;
}

@keyframes blink {
    0%,100% { opacity: 1; }
    50% { opacity: 0.3; }
}

/* ===== INFO ===== */
.bet { color: lime; }
.balance { color: cyan; }

.win { color: lime; text-shadow: 0 0 10px lime; }
.lose { color: red; text-shadow: 0 0 10px red; }

/* ===== BUTTONS ===== */
button {
    margin: 4px;
    padding: 6px 12px;
    font-size: 1rem;
    background: gold;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 0 10px gold;
}

button:hover {
    background: #ffdd33;
}

/* ===== ROZRZUCONE OBRAZY W TLE ===== */
.scatter {
    position: absolute;
    width: 140px;
    opacity: 0.75;
    filter: blur(0.5px);
    z-index: 1;
    transform: rotate(var(--rot));
    transition: transform 1s ease;
}

.scatter:hover {
    transform: scale(1.05) rotate(var(--rot));
    opacity: 0.9;
}

/* pozycje */
.s1 { top: 40px; left: 40px; --rot: -15deg; }
.s2 { top: 60px; right: 60px; --rot: 12deg; }
.s3 { top: 35%; left: 16%; --rot: -8deg; }
.s4 { top: 35%; right: 22%; --rot: 10deg; }
.s5 { bottom: 30%; left: 18%; --rot: 4deg; }
.s6 { bottom: 30%; right: 22%; --rot: -8deg; }
.s7 { bottom: 60px; left: 60px; --rot: -10deg; }
.s8 { bottom: 60px; right: 60px; --rot: 14deg; }


#multiplier-tile {
    position: fixed;
    right: 20px;
    top: 50%;
    transform: translateY(-50%);
    width: 60px;
    height: 60px;
    background: #0b3d24;
    border: 3px solid gold;
    border-radius: 12px;
    box-shadow: 0 0 15px gold;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.8rem;
    cursor: pointer;
    z-index: 20;
    transition: transform 0.3s;
}

#multiplier-tile:hover {
    transform: translateY(-50%) scale(1.1);
}

/* ===== PANEL ===== */
#multiplier-panel {
    position: fixed;
    right: -260px;
    top: 50%;
    transform: translateY(-50%);
    width: 240px;
    background: rgba(10, 40, 25, 0.95);
    border: 3px solid gold;
    border-radius: 16px;
    box-shadow: 0 0 25px gold;
    padding: 20px;
    z-index: 30;
    transition: right 0.4s ease;
    color: white;
}

#multiplier-panel.active {
    right: 90px;
}

#multiplier-panel h3 {
    text-align: center;
    color: gold;
    margin-bottom: 15px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* ===== WIERSZE ===== */
.multiplier-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 10px;
    margin-bottom: 8px;
    background: rgba(255,255,255,0.05);
    border-radius: 8px;
    font-size: 1.1rem;
}

.multiplier-row span:last-child {
    color: #ffd700;
    font-weight: bold;
}


</style>
</head>

<body>

    <!-- KAFELEK OTWIERAJƒÑCY -->
<div id="multiplier-tile">üéØ</div>

<!-- PANEL MNO≈ªNIK√ìW -->
<div id="multiplier-panel">
    <h3>Mno≈ºnik<br>Wygranych</h3>

    <div class="multiplier-row">
        <span>üí£</span><span>x3</span>
    </div>
    <div class="multiplier-row">
        <span>üê•</span><span>x4</span>
    </div>
    <div class="multiplier-row">
        <span>ü¶Ü</span><span>x5</span>
    </div>
    <div class="multiplier-row">
        <span>üå™Ô∏è</span><span>x6</span>
    </div>
    <div class="multiplier-row">
        <span>ü•ï</span><span>x10</span>
    </div>
</div>


    <!-- ROZRZUCONE GRAFIKI W TLE -->
<img src="{% static 'img/1.jpg' %}" class="scatter s1">
<img src="{% static 'img/2.jpg' %}" class="scatter s2">
<img src="{% static 'img/3.jpg' %}" class="scatter s3">
<img src="{% static 'img/4.jpg' %}" class="scatter s4">
<img src="{% static 'img/5.jpg' %}" class="scatter s5">
<img src="{% static 'img/6.jpg' %}" class="scatter s6">
<img src="{% static 'img/7.jpg' %}" class="scatter s7">
<img src="{% static 'img/8.jpg' %}" class="scatter s8">


<div class="frame-wrapper">
    <!-- RAMKA -->
    <img src="{% static 'img/pirat.png' %}" alt="Ramka">

    <!-- SLOTY W ≈öRODKU -->
    <div class="slot-cabinet">
    

        <div class="slot-machine">
            <div class="reel">{{ result.0 }}</div>
            <div class="reel">{{ result.1 }}</div>
            <div class="reel">{{ result.2 }}</div>
        </div>

        <div>
            <span class="led"></span>
            <span class="led"></span>
            <span class="led"></span>
            <span class="led"></span>
        </div>

        <p class="bet">Bet: {{ bet }}</p>
        <p class="balance">Saldo: {{ balance }}</p>

        {% if played %}
            {% if win %}
                <p class="win">üéâ WYGRANA!</p>
            {% else %}
                <p class="lose">üòû Spr√≥buj ponownie</p>
            {% endif %}
            <p>Wynik: {{ payout }}</p>
        {% else %}
            <p>Kliknij SPIN</p>
        {% endif %}

        {% if bankrut %}
            <p>Brak ≈õrodk√≥w üíÄ</p>
        {% endif %}

        <form method="post" id="spinForm">
            {% csrf_token %}
            <input type="hidden" name="spin" id="spinInput">

            <button type="submit" name="set_bet" value="10">Bet 10</button>
            <button type="submit" name="set_bet" value="50">Bet 50</button>
            <button type="submit" name="set_bet" value="100">Bet 100</button>

            <br>
            <button type="submit" name="spin">SPIN</button>
            <button type="submit" name="reset">RESET</button>
        </form>
    </div>
</div>

<script>
const form = document.getElementById("spinForm");
const reels = document.querySelectorAll(".reel");
const symbols = ["üí£","üê•","ü¶Ü","üå™Ô∏è","ü•ï"];

form.addEventListener("submit", function(e) {
    const clicked = document.activeElement;
    if (!clicked || clicked.name !== "spin") return;

    e.preventDefault();
    reels.forEach(r => r.classList.add("spinning"));

    const interval = setInterval(() => {
        reels.forEach(r => {
            r.textContent = symbols[Math.floor(Math.random() * symbols.length)];
        });
    }, 100);

    setTimeout(() => {
        clearInterval(interval);
        reels.forEach(r => r.classList.remove("spinning"));
        form.submit();
    }, 900);
});
</script>

<script>
const tile = document.getElementById("multiplier-tile");
const panel = document.getElementById("multiplier-panel");

tile.addEventListener("click", () => {
    panel.classList.toggle("active");
});
</script>


</body>
</html>
