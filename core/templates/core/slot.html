<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>JednorÄ™ki Bandyta</title>
<style>
body {
    background: radial-gradient(circle at top, #111, #000);
    font-family: 'Arial', sans-serif;
    text-align: center;
    color: #fff;
    padding: 20px;
}

.slot-cabinet {
    display: inline-block;
    background: #222;
    border: 6px solid #d4af37;
    border-radius: 20px;
    padding: 30px;
    box-shadow: 0 0 40px gold, 0 0 60px rgba(255, 215, 0, 0.5);
    position: relative;
}

.slot-machine {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin: 20px auto;
    padding: 20px;
    background: #111;
    border: 3px solid #ffd700;
    border-radius: 12px;
    box-shadow: inset 0 0 20px #fff, 0 0 20px gold;
}

.reel {
    width: 70px;
    height: 70px;
    background: #000;
    color: gold;
    border-radius: 10px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2.8rem;
    box-shadow: 0 0 10px gold, inset 0 0 5px #fff;
    transition: transform 0.2s;
}

.reel.spinning {
    opacity: 0.7;
    transform: scale(1.1);
    box-shadow: 0 0 25px #00ffea, inset 0 0 10px #fff;
}

.lever {
    position: absolute;
    right: -50px;
    top: 50%;
    width: 30px;
    height: 120px;
    background: #444;
    border: 3px solid #d4af37;
    border-radius: 10px;
    cursor: pointer;
    transform: translateY(-50%);
}

.lever:active {
    transform: translateY(-50%) translateX(2px) translateY(2px);
}

.led {
    width: 10px;
    height: 10px;
    background: red;
    border-radius: 50%;
    display: inline-block;
    margin: 0 2px;
    animation: blink 1s infinite;
}

@keyframes blink {
    0%,50%,100% { opacity: 1; }
    25%,75% { opacity: 0.2; }
}

h2.win { color: lime; text-shadow: 0 0 15px #00ff00; animation: blink 1s infinite; }
h2.lose { color: red; text-shadow: 0 0 15px #ff0000; animation: blink 1s infinite; }

p.balance { color: cyan; font-size: 1.2rem; }
p.bet { color: lime; font-size: 1.2rem; }

button { 
    font-size:1.2rem; 
    padding:8px 15px; 
    margin:5px; 
    background:gold; 
    color:black; 
    border:none; 
    border-radius:8px; 
    cursor:pointer; 
    box-shadow:0 0 10px gold; 
    transition: 0.1s;
}
button:hover { transform:scale(1.05); background:#ffdd33; }
</style>
</head>
<body>

<div class="slot-cabinet">
    <h1>ğŸ° JednorÄ™ki bandyta</h1>

    <div class="slot-machine">
        <div class="reel">{{ result.0 }}</div>
        <div class="reel">{{ result.1 }}</div>
        <div class="reel">{{ result.2 }}</div>
    </div>

    <!-- dekoracja -->
    <div>
        <span class="led"></span>
        <span class="led"></span>
        <span class="led"></span>
        <span class="led"></span>
    </div>

    <!-- spin -->
    <div class="lever" onclick="triggerSpin()"></div>

    <p class="bet">Aktualny bet: <strong>{{ bet }}</strong></p>
    <p class="balance">Saldo: <strong>{{ balance }}</strong></p>

    {% if played %}
        {% if win %}
            <h2 class="win">ğŸ‰ Wygrana!</h2>
        {% else %}
            <h2 class="lose">ğŸ˜ SprÃ³buj ponownie!</h2>
        {% endif %}
        <p>Wynik: {{ payout }}</p>
    {% else %}
        <p>Kliknij dÅºwigniÄ™ lub SPIN</p>
    {% endif %}

    {% if bankrut %}
    <p>Brak Å›rodkÃ³w, wypad z kasyna ğŸ˜…</p>
    {% endif %}
</div>

<!-- Formularz bet, spin, reset -->
<form method="post" id="spinForm">
    {% csrf_token %}
    <input type="hidden" name="spin" id="spinInput">

    <button type="submit" name="set_bet" value="10">Bet 10</button>
    <button type="submit" name="set_bet" value="50">Bet 50</button>
    <button type="submit" name="set_bet" value="100">Bet 100</button>

    <button type="submit" name="spin">SPIN</button>
    <button type="submit" name="reset">RESET</button>
</form>

<script>
const form = document.getElementById("spinForm");
const reels = document.querySelectorAll(".reel");
const spinInput = document.getElementById("spinInput");
const symbols = ["ğŸ’","ğŸ‹","ğŸ","ğŸ","â­"];


function triggerSpin() {
    spinInput.value = "1";
    form.querySelector('[name="spin"]').click(); 
}

form.addEventListener("submit", function(e) {
    const clicked = document.activeElement;

    
    if (!clicked || clicked.name !== "spin") return;

    e.preventDefault();
    spinInput.value = "1";

    reels.forEach(r => r.classList.add("spinning"));

    const interval = setInterval(() => {
        reels.forEach(r => {
            r.textContent = symbols[Math.floor(Math.random() * symbols.length)];
        });
    }, 100);

    setTimeout(() => {
        clearInterval(interval);
        reels.forEach(r => r.classList.remove("spinning"));
        form.submit(); 
    }, 1000);
});
</script>

</body>
</html>






<!-- <h1>ğŸ° Slot Machine</h1>
-----WczeÅ›niejsza wersja-------
<p>Aktualny bet: <strong>{{ bet }}</strong></p>
<p>Saldo: <strong>{{ balance }}</strong></p>

<form method="post">
    {% csrf_token %}

    <button type="submit" name="set_bet" value="10">Bet 10</button>
    <button type="submit" name="set_bet" value="50">Bet 50</button>
    <button type="submit" name="set_bet" value="100">Bet 100</button>

    <br><br>

    <button type="submit" name="spin">SPIN</button>  

    <br><br>

    <button type="submit" name="reset">RESET</button>  
</form>

<hr>

{% if result %}
    <p>
       {% for symbol in result %} 
        <span style="font-size: 2rem">{{symbol}}</span>
        {% endfor %}
    </p>
{% endif %}

{% if played %}
    {% if win %}
        <h2>ğŸ‰ Wygrana!</h2>
    {% else %}
        <h2>ğŸ˜ SprÃ³buj ponownie!</h2>
    {% endif %}

        <p>Wynik: {{ payout }}</p>

{% else %}
    <p>Kliknij â€Spinâ€, aby zagraÄ‡ ğŸ°</p>
{% endif %}

{% if bankrut %}
    <p>Brak Å›rodkÃ³w, wypad z kasyna biedaku</p>
{% endif %} -->